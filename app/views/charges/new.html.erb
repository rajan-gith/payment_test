
<%= form_tag create_charges_path do %>
  <article>
    <% if flash[:error].present? %>
      <div id="error_explanation">
        <p><%= flash[:error] %></p>
      </div>
    <% end %>
    <label for="">fill in the Amount to update your balance</label>
    <br>
    <label class="amount">
      <input type="number" name="amount" step="0.01" value="" id="wallet_amount">
    </label> Current balance :<%= current_user.wallet_amount %>
    <div class="">
      &nbsp;&nbsp;
    </div>
  </article>

<script src="https://checkout.stripe.com/checkout.js"
        class="stripe-button"
        data-key="<%= Rails.configuration.stripe[:publishable_key] %>"
        data-description="A month's subscription"
        data-amount=""
        data-locale="auto"></script>
<script type="text/javascript">
  $('#wallet_amount').change(function () {
    // console.log($(this).val());
    $(".stripe-button").data('amount', $(this).val())
  })
</script>

<% end %>
